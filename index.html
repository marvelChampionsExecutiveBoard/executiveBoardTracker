<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agents of S.H.I.E.L.D. Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background:#FFFFC5; }
    nav { background:#000080; color:#fff; padding:12px 20px; font-size:18px; }
    main { padding: 20px; display: flex; flex-direction: column; gap: 20px; }

    .tables-row { display: flex; gap: 20px; align-items: flex-start; flex-wrap: wrap; }
    table { border-collapse: collapse; width: max-content; background: #ffffff; box-shadow: 0 4px 8px rgba(0,0,0,0.08); table-layout: fixed; }
    caption { font-weight: bold; padding: 6px 8px; background: #dce9f5; color: #0b3c5d; text-align: left; }
    th { background: #1f6aa5; color: #ffffff; font-weight: bold; }
    th, td { border: 1px solid #ccc; padding: 2px 4px; text-align: left; white-space: normal; word-break: break-word; font-size: 12px; }
    .center { text-align:center; }

    /* Column colors for the 3 info tables */
    .tables-row table td:nth-child(1) { background-color: #fdd; } /* light red */
    .tables-row table td:nth-child(2) { background-color: #eee; } /* light grey */
    .tables-row table td:nth-child(3) { background-color: #ddf; } /* light blue */

    /* Investigation Tracker row colors */
    #investigation-tracker tr:nth-child(n+2):nth-child(-n+4) td { background-color: #fdd; } /* rows 2-4 light red */
    #investigation-tracker tr:nth-child(n+5):nth-child(-n+7) td { background-color: #eee; } /* rows 5-7 light grey */
    #investigation-tracker tr:nth-child(n+8):nth-child(-n+10) td { background-color: #ddf; } /* rows 8-10 light blue */

    /* Column three row spans in tracker */
    #investigation-tracker td[rowspan="3"]:nth-of-type(3) { background-color: #fdd; }
    #investigation-tracker td[rowspan="3"]:nth-of-type(3) + td[rowspan="3"] { background-color: #eee; }
    #investigation-tracker td[rowspan="3"]:nth-of-type(3) + td[rowspan="3"] + td[rowspan="3"] { background-color: #ddf; }

    /* Thicker bottom borders for 3rd and 6th row only */
    #investigation-tracker tr:nth-child(4) td,
    #investigation-tracker tr:nth-child(7) td,
    #investigation-tracker td[rowspan="3"] {
      border-bottom: 3px solid #555;
    }
    
    /* This will set the 2nd column (Motive) width in the investigation table */
	#investigation-tracker th:nth-child(1),
	#investigation-tracker td:nth-child(1) {
  		width:110px;
	}
    
    /* This will set the 2nd column (Motive) width in the investigation table */
	#investigation-tracker th:nth-child(2),
	#investigation-tracker td:nth-child(2) {
  		width: 30px;
	}

	#CMO-TBL th:nth-child(2),
	#CMO-TBL td:nth-child(2), { 
		width: 35px;
	}

  </style>
</head>
<body>

<nav>Agents of S.H.I.E.L.D. Tracker</nav>

<main>

<!-- Tracker Table moved above the other three tables -->
<table id="investigation-tracker">
  <caption>
    <div style="display:flex; justify-content: space-between; align-items: center; width:100%;">
      <span>Investigation Tracker</span>
      <button id="reset-btn">Reset</button>
    </div>
  </caption>
  <tr><th>Item</th><th class="center">Have</th><th class="center" colspan="3">Category</th></tr>
  <tr>
    <td>Security Scanner</td>
    <td class="center"><input type="checkbox" id="cb1"></td>
    <td rowspan="3" class="center" style="background-color:#fdd;">Means</td>
  </tr>
  <tr>
    <td>Medical Records</td>
    <td class="center"><input type="checkbox" id="cb2"></td>
  </tr>
  <tr>
    <td>Wiretap</td>
    <td class="center"><input type="checkbox" id="cb3"></td>
  </tr>
  <tr>
    <td>Ideology</td>
    <td class="center"><input type="checkbox" id="cb4"></td>
    <td rowspan="3" class="center" style="background-color:#eee;">Motive</td>
  </tr>
  <tr>
    <td>Money</td>
    <td class="center"><input type="checkbox" id="cb5"></td>
  </tr>
  <tr>
    <td>Blackmail</td>
    <td class="center"><input type="checkbox" id="cb6"></td>
  </tr>
  <tr>
    <td>Authority</td>
    <td class="center"><input type="checkbox" id="cb7"></td>
    <td rowspan="4" class="center" style="background-color:#ddf;">Opportunity</td>
  </tr>
  <tr>
    <td>Travel</td>
    <td class="center"><input type="checkbox" id="cb8"></td>
  </tr>
  <tr>
    <td>Security Clearance</td>
    <td class="center"><input type="checkbox" id="cb9"></td>
  </tr>
</table>

<div class="tables-row">

<!-- Chief Medical Officer -->
<table id="CMO-TBL">
  <caption>Chief Medical Officer</caption>
  <tr><th>Means</th><th id="test">Motive</th><th>Opportunity</th></tr>
  <tr><td>Medical Records</td><td>Money</td><td>Security Clearance</td></tr>
  <tr><td>Medical Records</td><td>Money</td><td>Travel</td></tr>
  <tr><td>Medical Records</td><td>Blackmail</td><td>Security Clearance</td></tr>
  <tr><td>Medical Records</td><td>Blackmail</td><td>Authority</td></tr>
  <tr><td>Medical Records</td><td>Ideology</td><td>Travel</td></tr>
  <tr><td>Wiretap</td><td>Money</td><td>Security Clearance</td></tr>
  <tr><td>Wiretap</td><td>Money</td><td>Travel</td></tr>
  <tr><td>Wiretap</td><td>Blackmail</td><td>Security Clearance</td></tr>
  <tr><td>Security Scanner</td><td>Money</td><td>Security Clearance</td></tr>
</table>

<!-- Chief Surveillance Officer -->
<table>
  <caption>Chief Surveillance Officer</caption>
  <tr><th>Means</th><th>Motive</th><th>Opportunity</th></tr>
  <tr><td>Medical Records</td><td>Blackmail</td><td>Travel</td></tr>
  <tr><td>Wiretap</td><td>Money</td><td>Authority</td></tr>
  <tr><td>Wiretap</td><td>Blackmail</td><td>Travel</td></tr>
  <tr><td>Wiretap</td><td>Blackmail</td><td>Authority</td></tr>
  <tr><td>Wiretap</td><td>Ideology</td><td>Security Clearance</td></tr>
  <tr><td>Wiretap</td><td>Ideology</td><td>Travel</td></tr>
  <tr><td>Security Scanner</td><td>Blackmail</td><td>Travel</td></tr>
  <tr><td>Security Scanner</td><td>Blackmail</td><td>Authority</td></tr>
  <tr><td>Security Scanner</td><td>Ideology</td><td>Travel</td></tr>
</table>

<!-- Chief Tactical Officer -->
<table>
  <caption>Chief Tactical Officer</caption>
  <tr><th>Means</th><th>Motive</th><th>Opportunity</th></tr>
  <tr><td>Medical Records</td><td>Money</td><td>Authority</td></tr>
  <tr><td>Medical Records</td><td>Ideology</td><td>Security Clearance</td></tr>
  <tr><td>Medical Records</td><td>Ideology</td><td>Authority</td></tr>
  <tr><td>Wiretap</td><td>Ideology</td><td>Authority</td></tr>
  <tr><td>Security Scanner</td><td>Money</td><td>Travel</td></tr>
  <tr><td>Security Scanner</td><td>Money</td><td>Authority</td></tr>
  <tr><td>Security Scanner</td><td>Blackmail</td><td>Security Clearance</td></tr>
  <tr><td>Security Scanner</td><td>Ideology</td><td>Security Clearance</td></tr>
  <tr><td>Security Scanner</td><td>Ideology</td><td>Authority</td></tr>
</table>

</div>

<script>
const checkboxes = document.querySelectorAll('#investigation-tracker input[type="checkbox"]');
const tables = document.querySelectorAll('.tables-row table');

// Load saved state from localStorage
checkboxes.forEach(cb => {
  const saved = localStorage.getItem(cb.id);
  if (saved === 'true') cb.checked = true;
});

// Function to hide rows based on checked boxes
function updateTables() {
  const checkedValues = Array.from(checkboxes)
    .filter(cb => cb.checked)
    .map(cb => cb.closest('tr').firstElementChild.textContent.trim());

  tables.forEach(table => {
    const rows = Array.from(table.querySelectorAll('tr')).slice(1); // skip header
    rows.forEach(row => {
      const cells = Array.from(row.children).map(td => td.textContent.trim());
      row.style.display = checkedValues.some(val => cells.includes(val)) ? 'none' : '';
    });
  });

  // Save current state to localStorage
  checkboxes.forEach(cb => localStorage.setItem(cb.id, cb.checked));
}

// Attach change event
checkboxes.forEach(cb => cb.addEventListener('change', updateTables));

// Reset button
document.getElementById('reset-btn').addEventListener('click', () => {
  checkboxes.forEach(cb => {
    cb.checked = false;
    localStorage.setItem(cb.id, false);
  });
  updateTables();
});

// Initial table update
updateTables();
</script>

</body>
</html>
